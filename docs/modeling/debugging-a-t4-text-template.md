---
title: 偵錯 T4 文字範本
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- text templates, troubleshooting
- text templates, debugging
author: gewarren
ms.author: gewarren
manager: douge
ms.workload:
- multiple
ms.prod: visual-studio-dev15
ms.technology: vs-ide-modeling
ms.openlocfilehash: fa551316e955b5e14d2b2030a7150a9b4daaab71
ms.sourcegitcommit: e13e61ddea6032a8282abe16131d9e136a927984
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/26/2018
ms.locfileid: "31954348"
---
# <a name="debugging-a-t4-text-template"></a>偵錯 T4 文字範本
您可以在文字範本中設定中斷點。 偵錯設計階段文字範本，請儲存文字範本檔，，然後選擇**偵錯 T4 範本**快顯功能表的 [方案總管] 中的檔案。 若要偵錯執行階段文字範本，只要偵錯它所屬的應用程式。

 若要偵錯文字範本，您應該了解範本轉換程序的步驟。 不同類型的錯誤會發生在每個步驟。 步驟如下所示。

|步驟|設計階段範本： 發生時|執行階段範本： 發生時|
|----------|--------------------------------------------|-----------------------------------------|
|程式碼是從文字範本產生。<br /><br /> 指示詞中的錯誤或不相符，或是得紊亂不堪`<#...#>`標記。|當您要儲存範本，或叫用文字的轉換。|當您要儲存範本，或叫用文字的轉換。|
|產生的程式碼會編譯。<br /><br /> 範本程式碼有編譯錯誤。|緊接的上一個步驟。|以及您的應用程式程式碼。|
|執行程式碼。<br /><br /> 執行階段範本程式碼中的錯誤。|緊接的上一個步驟。|當您的應用程式執行，並叫用的範本程式碼。|

 在大部分情況下，範本程式碼行號會提供錯誤報告中。 當錯誤報表參考暫存檔名時，常見的原因是不相符的括號，在文字範本的程式碼中。

 您可以在文字範本中設定中斷點，並以一般方式偵錯。

## <a name="common-errors-and-fixes"></a>常見的錯誤和修正程式
 下表列出最常見的錯誤和其修正。

|錯誤訊息|描述|方案|
|-------------------|-----------------|--------------|
|無法載入基底類別{0}' 的轉換類別所繼承。|如果找不到指定的基底類別，就會發生`inherits`範本指示詞中的參數。 訊息會提供範本指示詞的行號。|請確定指定的類別存在，而且組件指示詞中指定它存在於組件。|
|無法解析檔案的 include 文字：{0}|找不到包含的範本時，就會發生。 訊息會提供要求的 include 檔案的名稱。|請確定檔案路徑是相對於原始範本的路徑，或檔案位於主機上，已註冊的位置是檔案的完整路徑。|
|初始化轉換物件時產生錯誤。 將不會執行轉換。|發生於 'Initialize （）' 的轉換類別失敗或傳回 false。|Initialize （） 函式中的程式碼是來自指定的基底轉換類別\<#@template#> 指示詞和指示詞處理器。 導致初始化失敗可能的錯誤是在錯誤清單。 請調查失敗的原因。 您可以查看實際產生的程式碼 initialize （） 為遵循的程序來偵錯範本。|
|組件 '{0}'for 指示詞處理器'{1}' 未獲得 FullTrust 使用權限集合。 只有受信任的組件可提供指示詞處理器。 將不會載入這個指示詞處理器。|發生於系統不會不 FullTrust 權限授與包含指示詞處理器的組件。 訊息會提供組件的名稱和指示詞處理器的名稱。|請確定您只使用本機電腦上的受信任的組件。|
|路徑 '{0}' 必須位於此電腦的本機或信任區域的一部分。|發生於指示詞或組件指示詞參考了不在本機電腦或網路的受信任的區域上的檔案。|請確定指示詞或組件指示詞的所在位置的目錄是受信任的區域。 您可以將網路目錄加入您透過 Internet Explorer 信任的區域。|
|例如，「 無效語彙基元 ' catch'"或"命名空間不能直接包含成員 」 的多個語法錯誤|太多右大括號範本程式碼中。 編譯器會令人困惑它以標準的產生程式碼。|檢查右大括號和方括號內的程式碼分隔字元的數目。|
|迴圈或條件未編譯或正確執行。 例如：`<#if (i>10)#> Number is: <#= i #>`。<br /><br /> 此程式碼一律會輸出的值我。 只有"數目是: 「 條件式。|在 C# 中，一律使用大括號括住內嵌在控制陳述式中的文字區塊。|將大括號： `<#if (i>10) { #>    Number is: <#= i #><# } #>`。|
|「 運算式太複雜 」 時處理的設計階段範本，或編譯執行階段 （前置處理過後） 的範本。<br /><br /> [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] 會停止運作時嘗試以檢查執行階段範本產生的程式碼。|文字區塊名稱太長。 T4 將文字區塊轉換成具有一個字串常值的每個範本列字串串連運算式。 很長的文字區塊可以逾越編譯器的大小限制。|分割與這類運算式區塊的長文字區塊：<br /><br /> `<#= "" #>`|

## <a name="warning-descriptions-and-fixes"></a>警告的說明和修正程式
 下表列出最常見的警告，以及修正程式，如果有的話。

|警告訊息|描述|方案|
|---------------------|-----------------|--------------|
|載入 include 檔 '{0}' 傳回 null 或空字串。|如果包含的文字範本檔案是空白，就會發生。 訊息會提供包含檔案的檔案名稱。|請移除 include 指示詞，或確定在檔案中有某些內容。|
|正在編譯轉換：|前面加上所有的錯誤或警告源自編譯器在編譯轉換時，這個字串。 這個字串表示編譯器發生錯誤或警告。|如果您有問題，找出 DLL 時，您可能需要提供的完整路徑或完整的強式名稱，如果該 DLL 是在 GAC 中。|
|參數 '{0}' 指示詞中已經存在。 將忽略重複的參數。|發生於一次以上指示詞中指定的參數。 訊息會提供的參數和行號指示詞的名稱。|移除重複的參數規格。|
|載入 include 檔時發生錯誤。 '{0}'。 Include 指示詞會被忽略。|找不到檔案中指定時，就會發生`include`指示詞。 訊息會提供檔案和行號指示詞的名稱。|請務必包含檔案存在與原始的文字範本檔相同的目錄中或其中一個已登錄至主機的 include 目錄中。|
|無效的基底類別指定的轉換類別。 基底類別必須衍生自 Microsoft.VisualStudio.TextTemplating.TextTransformation。|發生時`inherits`範本指示詞中的參數會指定不是繼承自類別`TextTransformation`。 訊息會提供範本指示詞的行號。|指定的類別，衍生自`TextTransformation`。|
|'Template' 指示詞中指定了無效的文化特性。 文化特性必須是"XX-XX"格式。 將使用文化特性而異。|發生於指定的文化特性參數，在範本指示詞中的不正確。 訊息會提供範本指示詞的行號。|將文化特性參數變更為有效的文化特性"XX-XX"格式。|
|無效的偵錯值 '{0}' 在範本指示詞中指定。 偵錯值必須是"true"或"false"。 將使用預設值是"false"。|發生時`debug`指定範本指示詞中的參數不正確。 訊息會提供範本指示詞的行號。|將偵錯參數設為"true"或"false"。|
|無效的 HostSpecific 值 '{0}' 在範本指示詞中指定。 HostSpecific 值必須是"true"或"false"。 將使用預設值是"false"。|發生時中的主控件特定參數`template`指定指示詞不正確。 訊息會提供範本指示詞的行號。|將主機特定參數設為"true"或"false"。|
|無效的語言 '{0}' 中 'template' 指示詞指定。 語言必須是"C#"或"VB"。 將使用"C#"的預設值。|不支援的語言中指定時，就會發生`template`指示詞。 只有"C#"或"VB"允許 （不區分大小寫）。 訊息會提供範本指示詞的行號。|設定`language`"C#"或"VB"的範本指示詞中的參數。|
|找不到範本中的多個輸出指示詞。 第一個以外的所有都會被忽略。|發生當多個`output`指示詞會指定範本檔案中。 訊息會提供重複的輸出指示詞的行號。|移除重複項目`output`指示詞。|
|找不到範本中的多個範本指示詞。 第一個以外的所有都會被忽略。 範本指示詞的多個參數應該指定一個範本指示詞內。|如果您指定多個，就會發生`template`文字範本檔 （包括包含的檔案） 中的指示詞。 訊息會提供重複的範本指示詞的行號。|彙總不同`template`成一個指示詞`template`指示詞。|
|指定沒有處理器指示詞 '{0}'。 指示詞會被忽略。|如果您指定，就會發生`custom`指示詞，但不是提供`processor`屬性。 訊息會提供指示詞和行號的名稱。|提供`processor`屬性的名稱取代`directive`指示詞處理器。|
|處理器，名為 '{0}'找不到名為指示詞'{1}'。 指示詞會被忽略。|發生於系統找不到`directive`內指定的處理器`custom`指示詞。 訊息會提供指示詞的名稱、 處理器名稱和行號指示詞。|設定`processor`名稱的指示詞處理器指示詞中的屬性。|
|必要的參數 '{0}'為指示詞'{1}' 找不到。 指示詞會被忽略。|如果系統無法提供必要的參數，指示詞，就會發生。 訊息會提供遺漏的參數名稱、 指示詞名稱和行號。|提供遺漏的參數。|
|處理器名稱為 '{0}'不支援指示詞'{1}'。 指示詞會被忽略。|指示詞處理器不支援指示詞時，就會發生。 訊息會提供的名稱和行號有問題的指示詞，以及指示詞處理器的名稱。|更正指示詞的名稱。|
|檔案的 include 指示詞 '{0}' 會造成無限迴圈。|顯示循環 include 指示詞會指定 （例如檔案 A 包含檔案 B，其中包含檔案的）。|未指定循環 include 指示詞。|
|執行轉換：|前面加上此程式所有的錯誤或警告時執行轉換所產生的字串。|不適用。|
|在區塊內找不到未預期的開始或結束標記。 請確定，您未正確輸入開始或結束標記，而且您不需要任何巢狀的區塊中的範本。|當您有未預期時，顯示\<# >。 也就是說，如果您有\<# 之後，尚未關閉，另一個開啟標記，或有 #> 之前沒有未封閉開啟標記時。 訊息會提供不相符的標記的行號。|請移除不相符的開始或結束標記，或使用逸出字元。|
|指定指示詞格式錯誤。 指示詞會被忽略。 請以格式指定指示詞 `<#@ name [parametername="parametervalue"]*  #>`|顯示由剖析器指示詞未指定正確的格式。 訊息會提供不正確的指示詞的行號。|確定所有指示詞會在表單中`<#@ name [parametername="parametervalue"]*  #>`。 如需詳細資訊，請參閱[T4 文字範本指示詞](../modeling/t4-text-template-directives.md)。|
|無法載入組件 '{0}'的已註冊的指示詞處理器'{1}'<br /><br /> {2}|無法載入指示詞處理器，由主機時發生。 訊息會識別組件提供指示詞處理器和指示詞處理器的名稱。|請確定已正確註冊指示詞處理器，並有組件。|
|找不到類型 '{0}'Assembly' 中{1}'的已註冊的指示詞處理器'{2}'<br /><br /> {3}|發生於指示詞處理器的類型無法載入組件。 訊息會提供類型、 組件，以及指示詞處理器的名稱。|Vshost 登錄中，尋找指示詞處理器資訊 （名稱、 組件和類型）。 請確定正確，註冊指示詞處理器，且型別有組件中。|
|無法載入組件 '{0}'|載入的組件問題時，就會發生。 訊息會提供組件名稱。|您可以指定要載入的組件\<@# assembly #> 指示詞，以及指示詞處理器。 後面這個字串的錯誤訊息應該提供更多資料組件載入失敗的原因。|
|發生問題建立和初始化名為指示詞處理器 '{1}'。 處理器的類型是{0}。 指示詞會被忽略。|發生於系統無法建立或初始化指示詞處理器。 訊息會提供的名稱和行號指示詞和處理器的類型。|請確定您使用正確的指示詞處理器，並指示詞處理器具有公用預設建構函式。 否則，使用偵錯選項，來找出指示詞處理器的 initialize （） 方法失敗的原因。 如需詳細資訊，請參閱[疑難排解文字範本](../modeling/debugging-a-t4-text-template.md)。|
|處理指示詞時擲回的例外狀況 '{0}'。|發生於指示詞處理器在處理指示詞時，會擲回例外狀況。|請務必要指示詞處理器的參數正確。|
|主應用程式擲回例外狀況，正在嘗試解析組件參考 '{0}'。|發生於主應用程式在嘗試解析組件參考時，會擲回例外狀況。 訊息會提供組件參考字串。|組件參考來自\<@# assembly #> 指示詞和指示詞處理器。 請務必提供組件參數中的 'name' 參數正確。|
|嘗試指定不支援{1}值 '{0}' 指示詞 {2}|發生 RequiresProvidesDirectiveProcessor （全部我們產生指示詞處理器，衍生自它），根據提供時，不支援要求和提供引數。|請務必確認名稱中 name = 'value' 中提供的組需要，並提供參數是否正確。|