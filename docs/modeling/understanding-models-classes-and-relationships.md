---
title: 了解模型、類別和關聯性
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- Domain-Specific Language, models
author: gewarren
ms.author: gewarren
manager: douge
ms.workload:
- multiple
ms.prod: visual-studio-dev15
ms.technology: vs-ide-modeling
ms.openlocfilehash: 408c74dbbf23abee5d548484014e0f2ddc66963e
ms.sourcegitcommit: e13e61ddea6032a8282abe16131d9e136a927984
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/26/2018
---
# <a name="understanding-models-classes-and-relationships"></a>了解模型、類別和關聯性
特定領域語言 (DSL) 定義其 DSL 定義檔案，連同您可能會撰寫任何自訂程式碼。 大部分的 DSL 方案中的程式碼會產生這個檔案中。

 本主題說明 DSL 定義的核心功能。

## <a name="the-dsl-definition"></a>DSL 定義
 當您開啟`Dsl\DslDefinition.dsl`、 您[!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]視窗類似下列圖片。

 ![dsl 設計工具](../modeling/media/dsl_designer.png "dsl_designer")

 DSL 定義中最重要的資訊是 DSL 定義圖表中顯示。 其他資訊，也是 DslDefinition.dsl 的一部分，會顯示在通常會出現在圖表的側邊的 DSL 總管。 您可以使用圖中的最常見的工作，與用於更進階自訂的 DSL 總管。

 DSL 定義圖表會顯示定義模型項目，以及定義連結模型項目之間的關聯性的網域類別。 此外，它也會顯示圖形及連接器，用來向使用者顯示的模型項目。

 ![具有泳道的 dsl 設計工具](../modeling/media/dsl_desinger.png "dsl_desinger")

 當您在 DSL 定義中，在圖表或 DSL 總管 中選取項目相關的資訊會顯示在 屬性 視窗中。 DSL 詳細資料視窗中，可能會顯示其他資訊。

### <a name="models-are-instances-of-dsls"></a>模型是 Dsl 的執行個體
 A*模型*DSL 使用者建立的執行個體。 模型包含模型項目，也就是您定義時，網域類別和項目，也就是您定義的網域關聯性的執行個體之間連結的執行個體。 圖形和連接器，在圖表顯示的模型項目和連結，也可以有一個模型。 DSL 定義包括圖形類別、 連接器類別和類別圖表。

 DSL 定義就是所謂*網域模型*。 DSL 定義或網域模型是設計階段表示法的特定領域語言，而模型則是特定領域語言的執行階段具現化。

## <a name="domain-classes-define-model-elements"></a>網域類別定義的模型項目
 網域類別用來建立在網域中的各種項目，而網域關聯性的項目之間的連結。 它們是項目和連結，將會具現化設計特定語言的使用者在建立其模型時的設計階段表示法。

 下圖顯示已建立之使用者的音樂媒體櫃 DSL 模型。 音樂專輯包含歌曲的清單方塊來表示。 演出者都由圓角的方塊中，並連線到他們有貢獻的專輯。

 ![產生的 DSL 執行個體模型](../modeling/media/music_instance.png "Music_Instance")

 DSL 定義分隔兩個層面。 使用圖形類別和連接器類別會定義模型項目上模型圖表的外觀。 使用網域類別和網域關聯性定義模型中所含的資訊。

 下圖顯示的網域類別和關聯性，DSL 定義中的音樂媒體櫃。

 ![內嵌和參考關聯性](../modeling/media/music_classes.png "Music_Classes")

 下圖顯示四個網域類別： 音樂、 專輯、 演出者與歌曲。 網域類別定義網域屬性，例如名稱、 標題、 等等。 在執行個體模型中，其中一些屬性的值會顯示在圖表上。

 類別之間會網域關聯性： MusicHasAlbums、 MusicHasArtists、 AlbumbHasSongs 和 ArtistAppearedOnAlbums。 關聯性具有 1..1，例如的多重性 0..*。 例如，必須與相關 AlbumHasSongs 關聯性透過一個專輯的所有歌曲。 每個專輯可以有任意數目的歌曲。

### <a name="rearranging-the-dsl-definition-diagram"></a>DSL 定義圖表重新整理
 請注意，網域類別上可出現多次 DSL 定義圖表中，以在此圖專輯。 永遠是一個主要的檢視，而且可以是某些*參考*檢視。

 若要重新排列 DSL 定義圖表，您可以：

-   交換主要與參考檢視使用**這裡使樹狀**和**分割樹狀結構**命令。 以滑鼠右鍵按一下單一網域類別，以查看這些命令。

-   重新排序您的網域類別和圖形類別藉由按下 Ctrl + 向上鍵和 Ctrl + 向。

-   摺疊或展開類別，在每個圖形的右上方使用的圖示。

-   摺疊的樹狀組件，只要按一下底部的領域類別減號 （-）。

## <a name="inheritance"></a>繼承
 可以使用繼承定義網域類別。 若要建立繼承衍生，按一下 繼承 工具，按一下 衍生的類別，然後按一下基底類別。 將模型項目有自己的網域類別，以及繼承自基底類別的所有屬性定義的所有屬性。 它也會繼承其關聯性中的角色。

 也可以使用繼承，之間的關聯性、 圖形和連接器。 繼承必須保持同一個群組內。 圖形無法繼承自網域類別。

## <a name="domain-relationships"></a>網域關聯性
 連結模型項目時，可以透過關聯性。 連結永遠是二進位。他們會連結兩個項目。 不過，任何項目可以有其他物件，有許多連結，甚至可以相同的項目組之間的多個連結。

 就如同您可以定義不同類別的項目，您可以定義不同類別的連結。 連結的類別稱為*網域關係*。 網域關聯性指定其執行個體可以連接何種類別的項目。 每個關聯性端點會呼叫*角色*，與網域關聯性定義兩個角色，以及關聯性本身的名稱。

 有兩種類型的網域關聯性： 內嵌關聯性和參考關聯性。 DSL 定義圖表中，內嵌關聯性具有實線在每個角色，並參考關聯性有虛線。

### <a name="embedding-relationships"></a>內嵌關聯性
 在模型中，其根目錄中，除了每個項目是一個內嵌連結的目標。 因此，整個模型會形成內嵌連結的單一樹狀的結構。 內嵌的關聯性代表內含項目或擁有權。 以這種方式相關的兩個模型項目也是父系和子系。 要內嵌在父稱為子系。

 內嵌連結不通常會顯示明確與圖表上的連接器。 相反地，它們通常會以內含項目。 模型的根由圖表中，而且內嵌在其中的項目會顯示為圖表上的圖案。

 在範例中，根類別中的音樂有內嵌的關聯性 MusicHasAlbums 相簿，有內嵌 AlbumHasSongs 歌曲。 歌曲會顯示為每個專輯內的清單中的項目。 音樂也有內嵌 MusicHasArtists 演出者類別，其執行個體也會顯示為圖表上的圖案。

 根據預設，內嵌的元素會自動刪除其父系刪除時。

 儲存模型時以 XML 格式檔案，內嵌的元素會在巢狀其父系，除非您已自訂序列化。

> [!NOTE]
>  內嵌與繼承不同。 內嵌的關聯性中的子系不會繼承父項的屬性。 內嵌是連結的一種模型項目之間。 繼承類別之間的關聯性，而不會建立模型項目之間的連結。

### <a name="embedding-rules"></a>內嵌的規則
 執行個體模型中的每個項目必須是一個內嵌連結的詳細資訊，除了模型根的目標。

 因此，每個網域非抽象類別，除了根類別，必須至少一個內嵌關聯性的目標，或者它必須繼承自基底類別的內嵌。 類別可以是兩個或多個內嵌的目標，但其執行個體模型項目一次只能有一個父代。 從目標到來源的多重性必須是 0..1 或 1..1。

### <a name="the-explorer-displays-the-embedding-tree"></a>[總管] 中顯示內嵌的樹狀目錄
 DSL 定義也會建立檔案總管，使用者會看到其模型圖表一起。

 ![產生的 DSL 總管](../modeling/media/music_explorer.png "Music_Explorer")

 [總管] 中會顯示在模型中，即使您尚未定義任何圖形的所有項目。 它會顯示項目和內嵌關聯性，但未參考關聯性。

 若要查看網域項目之屬性的值，使用者會在模型圖表或在模型總管 中選取項目，並開啟 屬性 視窗。 它會顯示所有網域屬性，包括不會顯示在圖表上。 在範例中，每首歌曲標題和內容類型，但在圖表上顯示標題的值。

## <a name="reference-relationships"></a>參考關聯性
 參考關聯性代表任何類型的非內嵌的關聯性。

 參考關聯性通常會與圖形之間的連接器顯示在圖表上。

 在此模型的 XML 表示法，參考之間的連結兩個元素代表使用*moniker。* 也就是說，moniker 是唯一識別模型中的每個元素的名稱。 每個模型項目 XML 節點包含指定的關聯性名稱和其他項目之 moniker 的節點。

## <a name="roles"></a>角色
 每個網域關聯性有兩個角色、 來源角色和目標角色。

 在下列圖片之間的線**發行者**領域類別和**PublisherCatalog**網域關聯性是來源角色。 網域關係之間的線和**專輯**網域類別是目標角色。

 ![角色和屬性。] (../modeling/media/propertycode.png "PropertyCode")

 當您撰寫周遊模型的程式碼時，關聯性相關聯的名稱是特別重要。 比方說，當您建置 DSL 方案時，產生的類別發行者會有的屬性是集合的相簿的目錄。 專輯的類別有一個屬性是 「 發行者 」 之類別的單一執行個體的發行者。

 當您建立關聯性 DSL 定義中時，屬性和關聯性名稱會指定預設值。 不過，您可以變更它們。

## <a name="multiplicities"></a>多樣性
 多樣性指定項目數目可以具有相同的角色中的網域關聯性。 在範例中，零對多 (0..\*) 上的 [多重性] 設定**目錄**角色指定的任何執行個體**發行者**網域類別可以有最大數量**PublisherCatalog**關聯性連結，以您想要提供給它。

 在圖表上輸入，或修改設定 role 的多重性`Multiplicity`屬性**屬性**視窗。 下表描述此屬性的設定。

|多重性類型|描述|
|-----------------------|-----------------|
|0..* （零對多）|每個執行個體的網域類別可以有多個關聯性執行個體或關聯性的任何執行個體。|
|0..1 （零對一）|每個執行個體的網域類別可以有一個以上的執行個體的關聯性或關聯性的任何執行個體。|
|1..1 （一）|每個執行個體的網域類別可以有一個關聯性的執行個體。 您無法從任何角色類別的執行個體來建立此關聯性的多個執行個體。 如果啟用驗證，則任何角色類別的執行個體不有關聯性的任何執行個體時，會出現驗證錯誤。|
|1..* （一對多）|類別上有這個多重性之角色的每個執行個體可以有多個執行個體的關聯性，而且每個執行個體必須具有至少一個執行個體的關聯性。 如果啟用驗證，則任何角色類別的執行個體不有關聯性的任何執行個體時，會出現驗證錯誤。|

## <a name="domain-relationships-as-classes"></a>網域關聯性類別
 連結表示當做 LinkElement，也就是 ModelElement 衍生的類別的執行個體存放區中。 您可以在網域關係的網域模型圖表中定義這些屬性。

 來源或目標的其他關聯性，您也可以將關聯性。 在網域模型圖表中，以滑鼠右鍵按一下網域關聯性，然後按一下 **顯示類別**。 其他類別 方塊會出現。 您可以連接到它的關聯性。

 您可以定義關聯性部分繼承，一樣，您可以使用網域類別。 選取衍生關聯性，並設定**基底關聯性**屬性 視窗中。

 在衍生的關聯性，指定其基底關聯性。 在網域類別連結應該衍生自它，或連結的基底關聯性的類別相同。 在模型中建立衍生關聯性的連結時，它是衍生和基底關聯性的執行個體。 您可以在程式碼中，巡覽至使用基底或衍生的類別產生的屬性連結的另一端。

## <a name="see-also"></a>另請參閱

- [特定領域語言工具詞彙](http://msdn.microsoft.com/ca5e84cb-a315-465c-be24-76aa3df276aa)
